#!/usr/bin/env sh
#gcc -O3 -march=native -flto lang.c#license:john morris beck gpl2 @ gnu.org
#malloc and free for mmap an munmap, and make the files be in /dev/shm or fallback to /dev/tmp if shm is unavailable
#a special naming scheme with guarnteed unique filenames based on timestamp, process id, and a random string from /dev/urandom allows
#for optional shared memory between vm processes. shared memory is intended to be used immutably where possible else with locks
lang67(){ sh | awk 'BEGIN{printf "%s" "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\nmain(){int i0,i1,i2,i3,i4,i5,i6,i7;void* p0,p1,p2,p3,p4,p5,p6,p7;*i0=1;while(1){"}{if($1==0){j="exit(0)"}else if($1==1){j= $2 "-=i" $3}else if($1==2){j= $2 "=" $2 "<" $3}else if($1==3){j= $3 "=" $2 }else if($1==4){j= $3 "=" $2 }else if($1==5){j= $3 "=*(void**)" $2 }else if($1==6){j="*(void**)" $3 "=" $2 }else if($1==7){j= $3 "=(void*)((char*)(" $3 "+(int)" $2 "))"}else if($1==8){j= $3 "=malloc(" $2 ");" $2 "=(" $3 "==NULL)"}else if($1== 9){j= $2 "=(" $3 "==NULL);free(" $3 ")"}else if($1==10){j="fread(" $2 ",1," $3 ",stdin)"}else if($1==11){j="fwrite(" $2 ",1," $3 ",stdout);fflush(stdout))"}printf "%s%s" j ";"}END{printf %s "}}}"}' ; } ;
